<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - Softhelm</title>
</head>
<body>

<h1>Softhelm Dashboard</h1>
<p id="displayName"></p>

<div>
  <label>Username: <input type="text" id="usernameDisplay"></label><br>
  <label>Level: <span id="userLevel">1</span></label><br>
</div>

<div id="legendaryItems"></div>

<script>
const backendURL = "https://mainsofthelm.onrender.com";
const username = localStorage.getItem('softhelmUsername') || 'Initiate';

document.getElementById('displayName').innerText = username;
document.getElementById('usernameDisplay').value = username;

async function loadUserData() {
  try {
    const res = await fetch(`${backendURL}/getUserData?username=${username}`);
    const data = await res.json();
    document.getElementById('userLevel').innerText = data.level || 1;

    const listDiv = document.getElementById('legendaryItems');
    listDiv.innerHTML = '';
    (data.items || []).forEach(item => {
      const div = document.createElement('div');
      div.innerText = item;
      listDiv.appendChild(div);
    });
  } catch(e) {
    console.warn('Failed to load user data', e);
  }
}

loadUserData();
</script>

</body>
</html>
